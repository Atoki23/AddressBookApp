<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Address Book</title>
    <link rel="stylesheet" type="text/css" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <h1>Address Book</h1>
        <p>Manage your contacts easily and efficiently.</p>

        <div class="form-container">
            <h2>Add New Contact</h2>
            <form id="contactForm">
                <label for="firstName">First Name:</label>
                <input type="text" id="firstName" name="firstName" required><br>

                <label for="lastName">Last Name:</label>
                <input type="text" id="lastName" name="lastName" required><br>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required><br>

                <button type="submit">Add Contact</button>
            </form>
        </div>

        <div class="contact-list">
            <h2>Contact List</h2>
            <table>
                <thead>
                    <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                    </tr>
                </thead>
                <tbody id="contactTable">
                    <!-- Contacts will be inserted here -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        document.getElementById('contactForm').addEventListener('submit', function (e) {
            e.preventDefault();

            // Collect form data
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const email = document.getElementById('email').value;

            // Send data to the backend
            fetch('/api/contacts', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ firstName, lastName, email }),
            })
            .then(response => response.json())
            .then(() => {
                alert('Contact added successfully!');
                loadContacts(); // Refresh contact list
            })
            .catch(error => console.error('Error:', error));
        });

        function loadContacts() {
            // Fetch contact list from the backend
            fetch('/api/contacts')
                .then(response => response.json())
                .then(data => {
                    const contactTable = document.getElementById('contactTable');
                    contactTable.innerHTML = ''; // Clear the table

                    data.forEach(contact => {
                        const row = `<tr>
                            <td>${contact.firstName}</td>
                            <td>${contact.lastName}</td>
                            <td>${contact.email}</td>
                        </tr>`;
                        contactTable.insertAdjacentHTML('beforeend', row);
                    });
                });
        }

        // Load contacts when the page loads
        window.onload = loadContacts;
    </script>
</body>
</html>

